<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="google" content="notranslate" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frontoffice</title>
  <style>
    body {
      margin: 0;
      font-family: Verdana, Geneva, Tahoma, sans-serif;
    }

    header {
      position: fixed;
      top: 0;
      right: 0;
      height: 20px;
      background-color: #f0f0f0;
      color: #333;
      display: none; /* inicia escondido */
      align-items: center;
      justify-content: right;
      font-size: 0.75rem;
      border-bottom: 1px solid #ccc;
      border-left: 1px solid #ccc;
      border-radius: 0 0 0 4px;
      z-index: 10;
      font-size: 9px;
    }

    header span {
      margin: 0 10px;
    }

    #main {
      background-color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: calc(100vh - 100px); /* 20px cabeçalho + 80px rodapé */
      padding-top: 20px;
      flex-direction: column;
    }

    h1 {
      text-align: center;
      line-height: 45px;
      margin-top: 10px;
    }

    #loading {
      color: #000;
      font-size: 1.5rem;
      font-family: monospace;
      width: 500px;
      height: 350px;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    @keyframes dots {
      0%   { content: "."; }
      33%  { content: ".."; }
      66%  { content: "..."; }
      100% { content: "."; }
    }

    #loading p:first-of-type {
      width: 90px;
      margin: 0 auto 20px;
    }

    #loading p:first-of-type:after {
      content: ".";
      animation: dots 1.5s infinite steps(1, end);
    }

    #loading small {
      display: block;
      font-size: 0.9rem;
    }

    img {
      width: 100%;
      height: auto;
      max-width: 350px;
      max-height: 350px;
      display: none;
    }

    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 80px;
      background-color: #f0f0f0;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 0.9rem;
      border-top: 1px solid #ccc;
    }
  </style>
</head>
<body>

  <header id="header">
    <span id="serialInfo">Serial number: XXX</span>
  </header>

  <div id="main">
    <div class="warning"></div>
    <h1>Leia o QR Code abaixo <br> para solicitar a retirada do(a) aluno(a):</h1>

    <div id="loading">
      <p>Aguarde</p>
      <small>Um novo QR Code está sendo gerado.</small>
    </div>

    <img
      id="qrcode"
      src="https://back-end-2vzw.onrender.com/back-end/qrcode.png"
      alt="QR Code"
      onload="document.getElementById('loading').style.display = 'none'; document.getElementById('qrcode').style.display = 'block';"
    />
  </div>

  <footer>
    <span>ESCOLA<b>DIRETA</b> System<sup style="font-size: 9px;">®</sup> | Check-out Module - 2025</span>
  </footer>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const serial = urlParams.get('serialNumber');

    if (serial) {
      const header = document.getElementById('header');
      const serialInfo = document.getElementById('serialInfo');
      serialInfo.textContent = `Serial number: ${serial}`;
      header.style.display = 'flex';
    }

    // JSON com mensagens personalizadas por serialNumber
    const mensagens = {
      "01010101": "Este QR Code é apenas para testes.",
      "01010102": "ATENÇÃO: QR Code temporariamente indisponível para esta sala.",
      "01010103": "Bem-vindo! Este terminal está pronto para uso real."
    };

    if (serial) {
      // Mostrar cabeçalho com o número
      const header = document.getElementById('header');
      const serialInfo = document.getElementById('serialInfo');
      serialInfo.textContent = `Serial number: ${serial}`;
      header.style.display = 'flex';

      // Verifica se há uma mensagem específica para o serial
      const mensagem = mensagens[serial];
      if (mensagem) {
        const warningDiv = document.querySelector('.warning');
        warningDiv.textContent = mensagem;
        warningDiv.style.color = '#C62828';
        warningDiv.style.fontWeight = 'bold';
        warningDiv.style.marginBottom = '10px';
        warningDiv.style.textAlign = 'center';
      }
    }
  </script>


</body>
</html>
